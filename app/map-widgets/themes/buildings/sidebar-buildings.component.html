<div [class.heat-sidebar]="sidebarHeatContent" class="col-xs-6 col-md-4 r-sidebar sidebar-right">
  <perfect-scrollbar>
    <ng-content ></ng-content>
    <div id="build-inner" class="inner sub-build">
      <ng-container [ngTemplateOutlet]="sidebarHeatContent && heatContent"></ng-container>
    </div>
  </perfect-scrollbar>
  <ng-container [ngTemplateOutlet]="quartersContent"></ng-container>
  <ng-container [ngTemplateOutlet]="heatMonthsChart"></ng-container>
  <ng-container [ngTemplateOutlet]="heatClassesChart"></ng-container>
  <ng-container [ngTemplateOutlet]="sidebarHeatContent && infoTemplate"></ng-container>
</div>

<ng-template #heatContent>
  <div [@sidebarToggle]="innerState">
    <h3>{{sidebarHeatContent?.ADRESAS}}</h3>
    <p class="split-half">
      <span class="font-l">sezonas<br /></span>
      {{sidebarHeatContent.REITMAXMET}}-{{sidebarHeatContent.REITMAXMET+1}}
    </p>
    <p class="split-half">
      <span>klasė<br /></span>
      <span [class.highlight]="sidebarHeatContent.REITING > 6" class="border-r-2">
        <strong>{{sidebarHeatContent.REITING}} ({{sidebarHeatContent.REITINGAS}})</strong>
      </span>
    </p>
    <div class="clear-both"></div>
    <p class="split-half">
      <span class="font-l">sezonas<br /></span>
      {{sidebarHeatContent.REITMAXMET-1}}-{{sidebarHeatContent.REITMAXMET}}
    </p>
    <p class="split-half">
      <span>klasė<br /></span>
      <span [class.highlight]="sidebarHeatContent.REITING > 6" class="border-r-2">
        <strong>{{sidebarHeatContent.REITING1}}</strong>
      </span>
    </p>
    <div class="clear-both"></div>
    <p class="split-half">
      <span class="font-l">sezonas<br /></span>
      {{sidebarHeatContent.REITMAXMET-2}}-{{sidebarHeatContent.REITMAXMET-1}}
    </p>
    <p class="split-half">
      <span>klasė<br /></span>
      <span [class.highlight]="sidebarHeatContent.REITING > 6" class="border-r-2">
        <strong>{{sidebarHeatContent.REITING2}}</strong>
      </span>
    </p>
    <div class="clear-both"></div>

    <div class="bt-wrapper">
      <p class="build-bt build-top" (click)="openSidaberGroup('quarters')">
        <span class="animate">Kvartalo bendroji informacija</span>
      </p>
      <p class="build-bt build-top" (click)="openSidaberGroup('classes')">
        <span class="animate">Bendro tipo namų klasių grafikas</span>
      </p>
      <p class="build-bt build-top" (click)="openSidaberGroup('months')">
        <span class="animate">Namo šilumos suvartojimo grafikas</span>
      </p>
      <p class="build-bt build-top" (click)="openSidaberGroup('info')">
        <span class="animate">Papildoma informacija</span>
      </p>
    </div>
  </div>
</ng-template>

<ng-template #quartersContent>
  <div class="heat-months-graphic sidebar-container" [@sidebarToggle]="sidebarQuartersState">
    <perfect-scrollbar>
      <div class="build-p sidebar-header" (click)="closeSidaberGroup('quarters')">
        <a href="javascript:void(0)" class="button close animate build-close">Atgal</a>
      </div>
      <div class="heat-title"><p>Kvartalo bendroji informacija</p></div>
      <div class="main-s-content">
        <p>
          <span>Prižiūrinti organizacija<br /></span>
          Viso
        </p>
        <p>
          <span>Tipinių namų rūšiavimas<br /></span>
          Viso
        </p>
        <p>
          <span>Statybos metai<br /></span>
          Viso
        </p>
      </div>
    </perfect-scrollbar>
  </div>
</ng-template>

<ng-template #heatMonthsChart>
  <div class="heat-months-graphic sidebar-container" [@sidebarToggle]="sidebarMonthsState">
    <perfect-scrollbar>
    <div class="build-p sidebar-header" (click)="closeSidaberGroup('months')"> <a href="javascript:void(0)" class="button close animate build-close">Atgal</a></div>
    <div class="heat-title"><p>Vidutinis šilumos kiekis, tenkantis namo 1 m² naudingojo ploto, kWh/m²

    <span class="heat-tip">
      <span
        class="heat-highlight border-r-2"
        [popper]="'Mėnesinis šilumos suvartojimas pagal mokėjimus už šilumą yra įtakojamas normatyvinio karšto vandens gyvatuko ir netolygaus gyventojų karšto vandens suvartojimo, todėl šis kiekis neturi sutapti su Faktiniu kiekvieno pastato išskaičiuotu vartojimu (žiūrėti į 1 grafą)'"
        [popperTrigger]="'hover'"
        [popperForceDetection]="true"
        [popperPlacement]="'bottom'"
      >Paaiškinimas</span>
    </span></p></div>
    <div class="canvas-wrapper">
      <canvas width="326" height="400" #mChart></canvas>
    </div>
    </perfect-scrollbar>
  </div>
</ng-template>

<ng-template #heatClassesChart>
  <div class="heat-classes-graphic sidebar-container" [@sidebarToggle]="sidebarClassesState">
  <perfect-scrollbar>
    <div class="build-p sidebar-header" (click)="closeSidaberGroup('classes')"> <a href="javascript:void(0)" class="button close animate build-close">Atgal</a></div>

    <div class="heat-title"><p>Faktinio energijos vartojimo klasė <br /><br /></p></div>
    <div class="canvas-wrapper">
      <canvas width="326" height="400" #cChart></canvas>
    </div>
    <div class="heat-info"><p>Grafike vaizduojama paskutinio šildymo sezono <strong>{{heatingClassesData?.totalResults}}</strong> namų palyginimas pagal energijos
      <a
        href="./app/docs/metodika_2013.pdf"
        target="_blank"
        [popper]="'Faktinio Energijos Vartojimo Klasė yra skirta įvertinti, kiek energijos pastatas faktiškai vartoja patalpų šildymui. Pagal energijos vartojimą patalpų šildymui pastatai suskirstyti į 15 klasių: pati mažiausia ir efektyviausia yra 1 klasė, pati didžiausia ir mažiausiai efektyvi yra 15 klasė. Faktinio energijos vartojimo klasės skaitinė reikšmė tai dydis, kurį skaičiuojant iš jo yra eliminuota skirtingo šildymo sezono trukmės įtaka, skirtingo šildymo sezono išorės oro temperatūros įtaka, skirtingo pastato šildymo ploto įtaka, todėl galima lyginti skirtingų įvairaus dydžio pastatų skirtingų šildymo sezonų klases tarpusavyje, to paties FEVK įvairiais metais, mėnesiais ir pan.'"
        [popperTrigger]="'hover'"
        [popperForceDetection]="true"
        [popperPlacement]="'top'"
      >vartojimo klasę</a>
      <span
        [style.background-color]="selectionByTypeState ? '#e61c24' : '#ececec' "
        [style.color]="selectionByTypeState ? '#fff' : '#4c4c4c' "
        class="heat-highlight border-r-2 type-no"
        [popper]="popperContent"
        [popperTrigger]="'hover'"
        [popperForceDetection]="true"
        [popperPlacement]="'top'"
        (click)="selectBuildingsByType()"
      > {{sidebarHeatContent?.TIPINIS_PR}}
    </span> tipo namuose</p>
    <p><a	href="./app/docs/metodika_2013.pdf" target="_blank">Atsisiųskite metodiką</a></p></div>
    <popper-content #popperContent>
      <span *ngIf="!selectionByTypeState else message">Žemėlapyje filtruokite tik šio tipo namus</span>
      <ng-template #message>Naikinti šio tipo namų filtravimą</ng-template>
    </popper-content>
    </perfect-scrollbar>
  </div>
</ng-template>
<ng-template #infoTemplate>
  <div class="sidebar-container" [@sidebarToggle]="sidebarInfoState">
    <perfect-scrollbar>
      <div class="build-p sidebar-header" (click)="closeSidaberGroup('info')"> <a href="javascript:void(0)" class="button close animate build-close">Atgal</a></div>
      <div class="main-s-content">
        <p>
          <span>Prižiūrinti organizacija<br /></span>
          {{sidebarHeatContent.PRIEZIURA}}
        </p>
        <p>
          <span>Tipinių namų rūšiavimas<br /></span>
          {{sidebarHeatContent.TIPINIS_PR}}
        </p>
        <p>
          <span>Statybos metai<br /></span>
          <ng-container *ngIf="sidebarHeatContent.STATMETAI; else yearUnknown" >{{sidebarHeatContent.STATMETAI}}</ng-container>
          <ng-template #yearUnknown >-</ng-template>
        </p>
      </div>
      <div class="heat-info">
        <p><a href="http://www.vilnius.lt/lit/daugiabuciu_namu_atnaujinimas_modernizav/4234">Daugiabučių namų atnaujinimo tvarka</a></p>
        <p>Šilumos suvartojimo duomenys - AB „Vilniaus šilumos tinklai“</p>
        <p>Kilus klausimams kreiptis <a href="mailto:savivaldybe@vilnius.lt">savivaldybe@vilnius.lt</a></p>
      </div>
    </perfect-scrollbar>
  </div>
</ng-template>